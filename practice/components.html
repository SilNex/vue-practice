<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Vue</title>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
</head>

<body>
    <!-- <div id="example">
        <my-component></my-component>
    </div> -->

    <!-- <div id="example-2">
        <simple-counter></simple-counter>
        <simple-counter></simple-counter>
        <simple-counter></simple-counter>
    </div> -->

    <div id="app">
        <!-- <child message="안녕하세요!"></child> -->

        <div>
            <child :message="parentMsg"></child>
            <br>
            <input v-model="parentMsg">
        </div>
        <currency-input v-model="price"></currency-input>
    </div>

    <div id="counter-event-example">
        <p>{{ total }}</p>
        <button-counter v-on:increment="incrementTotal"></button-counter>
        <button-counter v-on:increment="incrementTotal"></button-counter>
    </div>

    <script>
        Vue.component('child', {
            // props 정의
            props: ['message'],
            // 데이터와 마찬가지로 prop은 템플릿 내부에서 사용할 수 있으며
            // vm의 this.message로 사용할 수 있습니다.
            template: '<span>{{ message }}</span>'
        })

        Vue.component('currency-input', {
            template: '\
    <span>\
      $\
      <input\
        ref="input"\
        v-bind:value="value"\
        v-on:input="updateValue($event.target.value)">\
    </span>\
  ',
            props: ['value'],
            methods: {
                // 값을 직접 업데이트하는 대신 이 메소드를 사용하여
                // 입력 값에 대한 서식을 지정하고 배치 할 수 있습니다
                updateValue: function (value) {
                    var formattedValue = value
                        // 공백을 제거합니다.
                        .trim()
                        // 소수 자릿수 2자리로 줄입니다
                        .slice(
                            0,
                            value.indexOf('.') === -1
                                ? value.length
                                : value.indexOf('.') + 3
                        )
                    // 값이 아직 정규화 되지 않은 경우
                    // 이를 수동으로 재정의하여 조건을 충족시킵니다.
                    if (formattedValue !== value) {
                        this.$refs.input.value = formattedValue
                    }
                    // 입력 이벤트를 통해 숫자 값을 내보냅니다.
                    this.$emit('input', Number(formattedValue))
                }
            }
        })

        var app = new Vue({
            el: '#app',
            data: {
                parentMsg: '',
                price: 0
            }
        })

        Vue.component('button-counter', {
            template: '<button @click="incrementCounter">{{ counter }}</button>',
            data: function () {
                return {
                    counter: 0
                }
            },
            methods: {
                incrementCounter: function () {
                    this.counter += 1
                    this.$emit('increment')
                }
            },
        })

        new Vue({
            el: '#counter-event-example',
            data: {
                total: 0
            },
            methods: {
                incrementTotal: function () {
                    this.total += 1
                }
            }
        })


        // Vue.component('my-component', {
        //     template: '<div>사용자 정의 컴포넌트 입니다!</div>'
        // })

        // var Child = {
        //     template: '<div>사용자 정의 컴포넌트 입니다~</div>'
        // }

        // Vue.component('my-component', {
        //     template: '<span>{{ message }}</span>',
        //     data: function () {
        //         return { message: 'hello' }
        //     }
        // })

        // new Vue({
        //     el: '#example',
        //     // components: {
        //     //     'my-component': Child
        //     // }
        // })

        // var data = { counter: 0 }

        // Vue.component('simple-counter', {
        //     template: '<button v-on:click="counter += 1">{{ counter }}</button>',
        //     data: function () {
        //         return { counter: 0 }
        //     }
        // })

        // new Vue({
        //     el: '#example-2'
        // })

    </script>

</body>

</html>